import{a as v,S as j,i as w}from"./assets/vendor-BSTwZ_tR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();const T="https://corsproxy.io/?url=",F="https://pixabay.com/api",R="52704159-1137319808f91d343a45c96fe",B="photo",E="horizontal",x=!0,q=9,O={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}};async function b(a,e){try{const r=`${F}/?key=${R}&q=${a}&image_type=${B}&orientation=${E}&safesearch=${x}&page=${e}&per_page=${q}`,i=await v(`${T}${r}`,O);if(!i.data)throw new Error(`HTTP error! Status: ${i.status}`);return i.data}catch(r){throw console.error(r),r}}const h=document.querySelector("ul.gallery"),S=document.querySelector(".loader"),L=document.querySelector(".load-more-btn"),C=new j(".gallery li a",{captions:!0,captionSelector:"img",captionType:"attr",captionsData:"alt",nav:!0,captionDelay:250});function y(a){const e=a.map(({largeImageURL:r,webformatURL:i,tags:t,likes:s,views:d,comments:M,downloads:A})=>`<li class="gallery-item js-gallery-item">
                <a class="gallery-link" href="${r}">
                  <img class="gallery-image" src="${i}" width='100px' alt="${t.split(",").slice(0,3).join(",")}">
                  <ul class="image-params">
                    <li><b>Likes</b>:<br> ${s}</li>
                    <li><b>Views</b>:<br> ${d}</li>
                    <li><b>Comments</b>:<br> ${M}</li>
                    <li><b>Downloads</b>:<br> ${A}</li>
                  </ul>
                </a>
              </li>`).join("");h.insertAdjacentHTML("beforeend",e),C.refresh()}function D(){h.innerHTML=""}function P(){h.classList.remove("is-shown"),S.classList.add("is-shown")}function n(){S.classList.remove("is-shown"),h.classList.add("is-shown")}function $(){L.classList.add("is-shown")}function p(){L.classList.remove("is-shown")}let l=1,f=0;const o={query:document.querySelector(".js-input-field"),form:document.querySelector(".js-form"),loadMoreButton:document.querySelector(".js-load-more-btn"),gallery:document.querySelector(".js-gallery"),toast:document.querySelectorAll(".iziToast")},c={emptyResponseMessage:"Sorry, there are no images matching your search query. Please try again!",emptyQueryMessage:"Please enter your search query image",endSearchResults:"We're sorry, but you've reached the end of search results."};let g="";function u(a){w.show({message:a,messageColor:"#ffffff",backgroundColor:"#fe5549",progressBar:!1,position:"center",timeout:1e4})}function m(a){w.destroy({},a)}o.form.addEventListener("submit",async a=>{if(a.preventDefault(),l=1,o.toast&&m(o.toast),P(),await new Promise(requestAnimationFrame),o.query.value.trim()===""){o.toast&&m(o.toast),n(),await new Promise(requestAnimationFrame),u(c.emptyQueryMessage);return}p(),D();try{g=o.query.value;const e=await b(g,l);if(f=Math.ceil(e.totalHits/q),!e.hits||e.hits.length===0){o.toast&&m(o.toast),n(),await new Promise(requestAnimationFrame),u(c.emptyResponseMessage);return}if(!e.hits){const r=document.querySelectorAll(".iziToast");r&&m(r),n(),await new Promise(requestAnimationFrame),u(c.endSearchResults);return}if(l>=f){y(e.hits),n(),u(c.endSearchResults);return}y(e.hits),n(),l<f?$():p()}catch(e){console.log(e),n()}});o.loadMoreButton.addEventListener("click",async a=>{a.preventDefault(),l+=1;try{p(),P(),await new Promise(requestAnimationFrame);const e=await b(g,l);if(!e.hits||e.hits.length===0){o.toast&&m(o.toast),n(),await new Promise(requestAnimationFrame),u(c.emptyResponseMessage);return}if(!e.hits){o.toast&&m(o.toast),n(),await new Promise(requestAnimationFrame),u(c.endSearchResults);return}if(l>=f){await new Promise(requestAnimationFrame),y(e.hits),n(),u(c.endSearchResults);return}y(e.hits),n(),$(),await new Promise(requestAnimationFrame);const r=[...o.gallery.querySelectorAll("li.js-gallery-item")];console.log(r);const i=r[r.length-e.hits.length];if(console.log(i),i){const t=i.getBoundingClientRect();console.log(t),window.scrollBy({top:t.height*2,behavior:"smooth"})}}catch(e){console.log(e)}});
//# sourceMappingURL=index.js.map
